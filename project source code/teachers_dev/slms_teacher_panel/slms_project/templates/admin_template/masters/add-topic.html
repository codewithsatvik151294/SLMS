{% include 'admin_template/header-1.html' %}
{% load static %}
    <div class="app-content content position-relative  ">
         
      <div class="content-wrapper">
        <div class="content-body "> 

           <div class="col-lg-12 col-md-12 col-sm-12  ">
            <div class="top-options pl-1 mb-2">
            <div class="row">
                 <div class="col-md-3   "><h3 >Add Topics</h3></div>
                    <div class="col-md-9 text-right pr-2  ">
                        <a class="btn btn-default   float-right btn-sm  ml-1" href="{% url 'topic_list' %}" ><i class="fa fa-arrow-left"></i> Back to list</a>
                    </div>
               </div>
           </div>
                <div class="card  form">
                  <div class="card-content ">
                      <div class="card-body pt-2"  >
                             <div class="row ">
                              <div class="col-lg-4   mb-1 form-group ico pl-2">
                                <label>Branch<span class="text-danger"><small><strong> *</strong></small></span></label><span id="branch-error" class="text-danger d-none"><small><strong> Branch is required</strong></small></span>
                                <i class="fa fa-search"></i>
                                   <select class="select2 form-control select2-placeholder select" onchange="get_class(this)" id='branch-id'>
                                    <option value="" class="d-none">Select Branch</option>
                                    {% for i in branchObj %}
                                    <option value="{{i.id}}">{{i.branch_name|title}}</option>
                                    {% endfor %}
                                 </select>
                              </div>

                                <div class="col-lg-4   mb-1 form-group ico pl-2">
                                  <label>Class<span class="text-danger"><small><strong> *</strong></small></span></label><span id="class-error" class="text-danger d-none"><small><strong> Class is required</strong></small></span>
                                  <i class="fa fa-search"></i>
                                    <select class="select2 form-control select2-placeholder10 select" id='class-id' onchange="get_subject(this)">
                                      <option value="" class="d-none">Select Class</option>
                                  </select>
                                </div>

                                 <div class="col-lg-4  mb-1 form-group ico pl-2">
                                   <label>Subject<span class="text-danger"><small><strong> *</strong></small></span></label><span id="subject-error" class="text-danger d-none"><small><strong> Subject is required</strong></small></span>
                                  <i class="fa fa-search"></i>
                                    <select class="select2 form-control select2-placeholder8 select" id='subject-id' onchange="get_topic(this)">
                                      <option value="" class="d-none">Select Subject</option>
                                  </select>
                                </div>
                              </div>
                              <div class="row">
                                   <div class="col-lg-11 mt-1   form-group">
                                      <label>Topic Name</label>
                                      <input type="text" class="form-control topic-data" placeholder="Enter topic name" value="" />
                                   </div> 
                                     <div class="text-right col-lg-1 mt-1 pt-2">
                                        <a  style="margin-top: 5px; " class="btn btn-purple add-topic btn-sm  " href="javascript:;"  ><i class="fa fa-plus"></i></a>
                                     </div>
                                   </div>
                                   <div id="more-topics"></div>
                                    <div class="row">
                                      <div class="text-right col-lg-12 mt-2 pt-2">
                                          <a class="btn btn-primary text-white" id="submit_btn" onclick="submit_records()">Submit</a>
                                         
                                       </div>
                                   </div>
                              </div>
                      </div>
                  </div>
              </div>
            </div>
      </div>
     </div>
   </div>
 
  {% include 'admin_template/footer-1.html' %}
  <script src="{% static 'static/app-assets/js/web_app_JS/admin_JS/master_JS/add-topics.js' %}" type="text/javascript"></script>
  <script>
    
    $(document).on('click', '.add-topic', function () {
      $("#more-topics").append('<div class="row"><div class="col-lg-11 mt-0 form-group"><input type="text" class="form-control topic-data" placeholder="Enter topic name" value="" /></div><div class="text-right col-lg-1  pt-0" ><a style="margin-top:2px" class="btn btn-danger remove-topic  btn-sm " href="javascript:;"><i class="fa fa-minus"></i></a></div></div>');
    });
    
    $(document).on('click', '.remove-topic', function () {
      $(this).parent().parent('.row').remove();
    });


    var i = 0;
    $(".topic-data").on('keypress', function (e) {
        if ($(this).val().length < 1) {
            if (e.which == 32) {
                return false;
            }
        }
        else {
            if (e.which == 32) {
                if (i != 0) {
                    return false;
                }
                i++;
            }
            else {
                i = 0;
            }
        }
        var regex = /[^,;]+$/;
        var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
        if (regex.test(str)) {
            return true;
        }
  
        e.preventDefault();
        return false;
    });
 </script>